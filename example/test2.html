<html>
<head>
  <meta charset="utf-8" />
</head>
<script>
  var requestAnimationFrame = window.requestAnimationFrame
                           || window.mozRequestAnimationFrame
                           || window.webkitRequestAnimationFrame
                           || window.msRequestAnimationFrame
                           || window.oRequestAnimationFrame;
</script>
<script src="../js/piqueselle.js"></script>
<script>
function start() {
  var i, j;
  var canvas = document.getElementById("c");
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;

  var context = new Piqueselle.Context(canvas);

  var index = [];
  for(i = 0; i < 4; ++ i) {
    for(j = 0; j < 4; ++ j) {
      index.push(i);
      index.push(j);
    }
  }

  var atlas = new context.TextureAtlas({
    atlas: document.getElementById("atlas"),
    index: {
      data: new Uint8Array(index),
      width: 16,
      height: 1
    }
  });

  var plane = [];
  for(i = 0; i < 32*32; ++ i) {
    plane.push(0);
  }

  var plane = new context.TileMap({
    map: {
      data: new Uint8Array(plane),
      width: 32,
      height: 32
    }
  });

  console.log('atlas: ', atlas);
  console.log('map', plane);

};
</script>
<body onload="start();">
  <img id="atlas" src="walls1.png" style="display: none"></img>
  <canvas id="c" style="width:100%; height:100%"></canvas>
</body>
</html>